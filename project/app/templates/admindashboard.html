{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>

    <!-- ✅ Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body{
            overflow:hidden;
        }

        .topbar{
            height:70px;
            background:#3f5873;
            color:white;
            display:flex;
            justify-content:space-between;
            align-items:center;
            padding:0 25px;
        }

        .admin-info{
            display:flex;
            align-items:center;
            gap:15px;
        }

        .admin-img{
            width:45px;
            height:45px;
            border-radius:50%;
            object-fit:cover;
            border:2px solid white;
        }

        .main-layout{
            display:flex;
            height:calc(100vh - 70px);
        }

        .sidebar{
            width:250px;
            background:#4a637d;
        }

        .sidebar a{
            display:block;
            color:white;
            padding:15px 20px;
            text-decoration:none;
            border-bottom:1px solid rgba(255,255,255,0.1);
        }

        .sidebar a:hover{
            background:#3b5168;
        }

        .content{
            flex:1;
            background:#f5f6f8;
            padding:30px;
            overflow:auto;
        }
    </style>
</head>

<body>

    <!-- ===== HEADER ===== -->
    <div class="topbar">
        <div class="admin-info">
            <img src="{% static data.image %}" alt="Admin" class="admin-img">
            <h5 class="mb-0">Welcome {{ data.name }}</h5>
        </div>

        <a href="{% url 'Logout' %}" class="text-info fw-bold text-decoration-none">
            Logout
        </a>
    </div>

    <!-- ===== MAIN ===== -->
    <div class="main-layout">

        <!-- SIDEBAR -->
        <div class="sidebar">
            <a href="{% url 'add_dep' %}">Add Department</a>
            <a href="{% url 'show_dep' %}">Show Department</a>
            <a href="{% url 'add_emp' %}">Add Employee</a>
            <a href="{% url 'show_emp' %}">Show Employee</a>
            <a href="{% url 'emp_all_query' %}">Employee Query</a>
            <a href="#">Profile</a>
        </div>

        <!-- CONTENT -->
        <div class="content">

            

            <!-- ✅ Django Messages -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <!-- ===== ADD DEPARTMENT ===== -->
            {% if add_dep %}

            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    Add Department
                </div>

                <div class="card-body">
                    <form action="{% url 'save_dep' %}" method="post">
                        {% csrf_token %}

                        <div class="mb-3">
                            <label class="form-label">Department Name</label>
                            <input type="text" name="dep_name" class="form-control">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Department Description</label>
                            <textarea name="dep_desc" class="form-control" rows="3"></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Department Head</label>
                            <input type="text" name="dep_head" class="form-control">
                        </div>

                        <button type="submit" class="btn btn-primary">
                            Submit
                        </button>
                    </form>
                </div>
            </div>

            <!-- ===== SHOW DEPARTMENT ===== -->
            {% elif show_dep %}

            <div class="card shadow-sm">
                <div class="card-header bg-success text-white">
                    Department List
                </div>

                <div class="card-body">
                    <table class="table table-bordered table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>S.No</th>
                                <th>Name</th>
                                <th>Description</th>
                                <th>Head</th>
                                <th>Edit</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in departments %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ i.dep_name }}</td>
                                <td>{{ i.dep_desc }}</td>
                                <td>{{ i.dep_head }}</td>
                                <td><a href=""><button type="submit" style="background-color: yellow;">edit</button></a></td>
                                <td><a href=""><button type="submit" style="background-color: red;">delete</button></a></td>
                            
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- ===== ADD EMPLOYEE ===== -->

            {% elif add_emp %}

            <div class="container mt-5">
    <div class="row justify-content-center">
    <div class="col-md-6">

        <div class="card shadow-sm">
        <div class="card-body p-4">

            <h4 class="text-center mb-4">Add Employee</h4>

            <form action="{% url 'save_emp' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label">Employee Name</label>
                <input type="text" class="form-control" name="name" placeholder="Enter name">
            </div>

            <div class="mb-3">
                <label class="form-label">Contact</label>
                <input type="number" class="form-control" name="contact" placeholder="Enter contact">
            </div>

            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="email" placeholder="Enter email">
            </div>

            <div class="mb-3">
                <label class="form-label">Department</label>
                <select class="form-select" name="dept">
                <option value="">Select Department</option>
                {% for i in departments %}
                    <option value="{{ i.dep_name }}">{{ i.dep_name }}</option>
                {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Employee Code</label>
                <input type="text" class="form-control" name="code" placeholder="Enter code">
            </div>

            <div class="mb-3">
                <label class="form-label">Employee Image</label>
                <input type="file" class="form-control" name="image">
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary">
                Add Employee
                </button>
            </div>
            </form>
        </div>
        </div>
    </div>
    </div>
</div>
<!-- ===== SHOW EMPLOYEE ===== -->
            {% elif show_emp %}

            <div class="card shadow-sm">
                <div class="card-header bg-success text-white">
                    Department List
                </div>

                <div class="card-body">
                    <table class="table table-bordered table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>S.No</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>contact</th>
                                <th>Department</th>
                                <th>Code</th>
                                <th>Image</th>
                                <th>Edit</th>
                                <th>Delete</th>


                            </tr>
                        </thead>
                        <tbody>
                            {% for i in departments %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ i.Name }}</td>
                                <td>{{ i.Email }}</td>
                                <td>{{ i.Contact }}</td>
                                <td>{{ i.Dept }}</td>
                                <td>{{ i.Code }}</td>
                                <td><img src="{{ i.image.url }}" width="50" height="50">{{i.Image}}</td>
                                <td><a href="#"><button type="submit" style="background-color: yellow;">edit</button></a></td>
                                <td><a href="#"><button type="submit" style="background-color: red;">delete</button></a></td>

                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

{% elif emp_all_query %}
                <div class="container mt-4">

    <h4 class="mb-3">All Queries</h4>

    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>S.No</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Department</th>
                    <th>Query</th>
                    <th>Status</th>
                    <th width="90">Edit</th>
                    <th width="90">Delete</th>
                    <th> reply</th>
                </tr>
            </thead>

            <tbody>
                {% for i in all_query %}
               <tr>
                  <td>{{ forloop.counter }}</td>
                  <td>{{ i.Name }}</td>
                  <td>{{ i.Email }}</td>
                  <td>{{ i.Dept }}</td>
                  <td>{{ i.Query }}</td>

                  <td>
                    
                      {% if i.reply%}
                            Done 
                        {% else %}
                            {{i.Status}}
                        {% endif %}
                  </td>

                  <td>
                      <button type="button" class="btn btn-sm btn-outline-primary">
                          Edit
                      </button>
                  </td>

                  <td>
                      <button type="button" class="btn btn-sm btn-outline-danger">
                          Delete
                      </button>
                  </td>
                  <td>
                      <button type="button" class="btn btn-sm btn-outline-danger">
                        {% if i.reply %}
                            {{i.reply}}
                          {% else %}
                                <a href="{% url 'reply' pk=i.id %}">reply</a> 
                           {% endif %}

                        </td>
                        
                      </button>
                  </td>
              </tr>
                {% endfor %}
            </tbody>
        </table>
        
                   
                </form>
                
            </div>
        </div>
{% if q_data %}
<div class="card mt-3 shadow-sm">
    <div class="card-body">
        
        <h5 class="mb-3">Reply to Query</h5>

                    <form action="{% url 'a_reply' pk=q_data.id %}" method="post">
                        {% csrf_token %}

                        <div class="mb-3">
                            <label class="form-label fw-semibold">Name</label>
                            <input type="text" 
                                class="form-control" 
                                name="name" 
                                value="{{ q_data.Name }}" 
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-semibold">Email</label>
                            <input type="email" 
                                class="form-control" 
                                name="email" 
                                value="{{ q_data.Email }}" 
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-semibold">Department</label>
                            <input type="text" 
                                class="form-control" 
                                name="dept" 
                                value="{{ q_data.Dept }}" 
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-semibold">Query</label>
                            <textarea class="form-control" 
                                    rows="3" 
                                    readonly>{{ q_data.Query }}</textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-semibold">Your Reply</label>
                            <textarea class="form-control" 
                                    name="reply" 
                                    rows="4" 
                                    placeholder="Write your reply here..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            Reply
                        </button>

                    </form>

                    
                </div>
            </div>
                    {% endif %}










            {% endif %}




            
    <!-- ✅ Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>





<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="btn-group" role="group">
  <button type="button" class="btn btn-primary">Left</button>
  <button type="button" class="btn btn-primary">Middle</button>
  <button type="button" class="btn btn-primary">Right</button>
</div>